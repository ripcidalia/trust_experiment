<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />

    <!--
      App: Trust in Human–Robot Interaction in Search-and-Rescue Scenarios
      Purpose: Minimal shell that loads CSS, jsPsych vendor scripts, shared UI fragments, then boots the app.
      Notes:
      - Keep CSS order: variables → base → layout → overlays/components → effects → overrides.
      - jsPsych vendor plugins load before our ES module bootstrap.
    -->
    <title>Trust in Human–Robot Interaction in Search-and-Rescue Scenarios</title>

    <!-- Mobile/viewport: “viewport-fit=cover” enables safe-area insets on iOS -->
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover"
    />

    <!-- Optional PWA-style hints (safe to leave enabled even without a manifest) -->
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />

    <!-- jsPsych vendor -->
    <script src="jspsych/jspsych.js"></script>
    <script src="jspsych/plugin-html-slider-response.js"></script>
    <script src="jspsych/plugin-html-button-response.js"></script>
    <script src="jspsych/plugin-html-keyboard-response.js"></script>
    <script src="jspsych/plugin-fullscreen.js"></script>
    <link href="jspsych/jspsych.css" rel="stylesheet" type="text/css" />

    <!-- CSS: tokens/vars → base → layout → UI components/effects → overrides -->
    <link rel="stylesheet" href="styles/variables.css" />
    <link rel="stylesheet" href="styles/base.css" />
    <link rel="stylesheet" href="styles/layout.css" />
    <link rel="stylesheet" href="styles/loading-overlay.css" />
    <link rel="stylesheet" href="styles/scene.css" />
    <link rel="stylesheet" href="styles/blackout.css" />
    <link rel="stylesheet" href="styles/drone.css" />
    <link rel="stylesheet" href="styles/cone.css" />
    <link rel="stylesheet" href="styles/fx.css" />
    <link rel="stylesheet" href="styles/mission-panel.css" />
    <link rel="stylesheet" href="styles/decision-box.css" />
    <link rel="stylesheet" href="styles/warmth.css" />
    <link rel="stylesheet" href="styles/shake.css" />
    <link rel="stylesheet" href="styles/exit-modal.css" />
    <link rel="stylesheet" href="styles/mobile.css" />
    <link rel="stylesheet" href="styles/jspsych-overrides.css" />
  </head>

  <body>
    <!--
      Bootstrap:
      - Load static HTML fragments (overlays, modals, targets) before running main timeline.
      - Then import and run the ES module entrypoint.
      - Using top-level await is supported in modern browsers; fallback bundlers can inline this.
    -->
    <script type="module">
      import { loadUIFragments } from './src/ui/fragments.js';
      await loadUIFragments();

      const { bootstrap } = await import('./src/main.js');
      bootstrap();
    </script>

    <!-- No-JS guard for participants with disabled scripting -->
    <noscript>
      <div style="padding:16px; font-family:system-ui,Segoe UI,Roboto,Arial;">
        JavaScript is required to run this study. Please enable JavaScript and reload the page.
      </div>
    </noscript>
  </body>
</html>
